<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Júnior Araújo - Sistema de Campanha Política</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        body { background: #f4f7f6; font-family: 'Segoe UI', sans-serif; }
        .app-card { background: white; border-radius: 15px; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 15px; padding: 15px; }
        .stat-box { background: #2563eb; color: white; border-radius: 15px; padding: 20px; text-align: center; margin-bottom: 20px; }
        .fab { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; border-radius: 50%; background: #22c55e; color: white; border: none; font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

<div class="container py-3">
    <div class="stat-box shadow">
        <h5 class="fw-bold mb-1">{{ user.nome }}</h5>
        <p class="small mb-3 opacity-75">{{ user.cargo }} | {{ user.municipio }}</p>
        <div class="row">
            <div class="col-6 border-end"><b>{{ contas.FAMILIA }}</b><br><small>FAMÍLIAS</small></div>
            <div class="col-6"><b>{{ contas.PESSOA }}</b><br><small>PESSOAS</small></div>
        </div>
    </div>

    <div class="row g-2 mb-4">
        {% if user.cargo in ['ADM', 'CANDIDATO'] %}
        <div class="col-6"><button class="btn btn-dark w-100 py-3 rounded-4 fw-bold" data-bs-toggle="modal" data-bs-target="#mEquipe"><i class="bi bi-people"></i> EQUIPE</button></div>
        <div class="col-6"><button class="btn btn-info text-white w-100 py-3 rounded-4 fw-bold" data-bs-toggle="modal" data-bs-target="#mSenhas"><i class="bi bi-key"></i> SENHAS</button></div>
        {% endif %}
    </div>

    <h6 class="fw-bold text-muted mb-3"><i class="bi bi-list"></i> REGISTROS NO SISTEMA</h6>
    {% for c in lista %}
    <div class="app-card border-start border-4 {% if c.tipo == 'FAMILIA' %}border-primary{% else %}border-success{% endif %}">
        <div class="d-flex justify-content-between">
            <span class="badge {% if c.tipo == 'FAMILIA' %}bg-primary{% else %}bg-success{% endif %} mb-2">{{ c.tipo }}</span>
            <a href="/excluir_registro/{{c.id}}" class="text-danger small" onclick="return confirm('Excluir?')"><i class="bi bi-trash"></i></a>
        </div>
        <h6 class="fw-bold mb-1">{{ c.nome }}</h6>
        <p class="small text-muted mb-2">
            <i class="bi bi-geo-alt"></i> {{c.rua}}, {{c.numero}} - {{c.bairro}}<br>
            <i class="bi bi-person"></i> Líder: {{ c.lideranca }}
        </p>
        
        <div class="bg-light p-2 rounded small">
            <b>AÇÕES:</b> 
            {% for acao in c.acoes %}<span class="badge bg-light text-dark border me-1">{{ acao }}</span>{% endfor %}
            {% if c.saude and c.saude != 'None' %}<span class="badge bg-danger">{{ c.saude }}</span>{% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<button class="fab" data-bs-toggle="modal" data-bs-target="#mCad"><i class="bi bi-plus-lg"></i></button>

<script>
    function toggleSaude() {
        const acoes = Array.from(document.querySelectorAll('input[name="acoes_marcadas"]:checked')).map(el => el.value);
        document.getElementById('div_saude_detalhe').style.display = acoes.includes('SAÚDE') ? 'block' : 'none';
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
